# 🔺 Loon configure
# 🔺 Update Date: 20250406
# 🔺 author: ONKK
# 🔺 具体语法和格式参考：https://github.com/Loon0x00/LoonExampleConfig

[General]
# 🔺 SNI辅助规则匹配
sni-sniffing = true
# 🔺 策略切换时关闭连接
disconnect-on-policy-change = true
# 🔺 是否开启YUN的IPv6流量转发
ipv6-vif = off
# 🔺 目前iOS设备上的流量有两种方式传递给Loon，分别是HTTP Proxy和TUN（可以简单理解为虚拟网卡），bypass-tun则和TUN有关，如果配置了该参数，那么所配置的这些IP段、域名就会不交给Loon来处理，系统直接处理
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32
# 🔺 和上面类似，skip-proxy则和HTTP Proxy有关，如果配置了该参数，那么所配置的这些IP段、域名将不会转发到Loon，而是由系统处理
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,e.crashlynatics.com
# 🔺 dns服务，system表示系统自带dns服务器
dns-server = system,223.5.5.5,119.29.29.29
# 🔺 DoH server，标准的url格式，以,分割多个地址
doh-server = https://223.5.5.5/dns-query,https://1.1.1.1/dns-query,https://1.12.12.12/dns-query
# 🔺 DoQ server，以quic://开头，以,分割多个地址，默认端口784
doq-server = quic://dns.adguard-dns.com:784
# 🔺 DoH3 server，标准的url格式，以,分割多个地址
doh3-server = h3://223.5.5.5/dns-query
# 🔺 ip-mode
ip-mode = v4-only
# 🔺 是否开启局域网代理访问
allow-wifi-access = false
# 🔺 开启局域网访问后的http代理端口
wifi-access-http-port = 7222
# 🔺 开启局域网访问后的socks5代理端口
wifi-access-socks5-port = 7221
# 🔺 测速所用的测试链接，如果策略组没有自定义测试链接就会使用这里配置的
proxy-test-url = http://cp.cloudflare.com/generate_204
# 🔺 检测网络可用性时的链接，一般填写可以直连访问的链接
internet-test-url = http://wifi.vivo.com.cn/generate_204
# 🔺 延时测试超时秒数
test-timeout = 2
# 🔺 一个节点连接失败几次后会进行节点切换，默认3次
switch-node-after-failure-times = 2
# 🔺 订阅资源解析器链接，推荐Peng大的sub-store订阅节点解析器
resource-parser = https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-parser.loon.min.js
# 🔺 当切换到某一特定的WiFi下时改变Loon的流量模式，如"loon-wifi5g":DIRECT，表示在loon-wifi5g这个wifi网络下使用直连模式，"cellular":PROXY，表示在蜂窝网络下使用代理模式，"default":RULE，默认使用分流模式
;ssid-trigger = "loon-wifi5g":DIRECT,"cellular":PROXY,"default":RULE
# 🔺 有些app会自己去请求DNS获取IP，这样导致有些域名类型的规则无法进行匹配，所以Loon是用了FakeIP来解决这个问题，原理是截取这些DNS请求，返回一个假的IP响应，然后在获取到这个假的IP的请求时将相关域名映射到请求中；但是有时候系统的一些域名会缓存这些假IP，导致关闭Loon后会用这个假的IP直接发起请求，这就会导致一些问题，针对这种情况可以配置real-ip来使这些域名返回真实的ip
real-ip = *.apple.com,*.icloud.com
# 🔺 指定流量使用哪个网络接口进行转发，目前包含三种模式:Auto: 系统自动分配;Cellular: 在WiFi和蜂窝数据都开启的情况下指定使用蜂窝网络;Performace: 在WiFi和蜂窝数据都开启的情况下使用最优的网络接口;Balance: 在WiFi和蜂窝数据都开启的情况下，均衡使用网络接口
interface-mode = auto
# 🔺 禁用udp协议的一些端口
disable-udp-ports = 443,80
# 🔺 禁用stun是否禁用stun协议的udp数据，禁用后可以有效解决webrtc的ip泄露
disable-stun = true
# 🔺 自定义geoip数据库的下载地址
geoip-url = https://geodata.kelee.one/Country-Masaiki.mmdb
# 🔺 自定义asn数据库的下载地址
ipasn-url = https://geodata.kelee.one/GeoLite2-ASN-P3TERX.mmdb
# 🔺 当UDP的流量规则匹配到相关节点，但该节点不支持UDP或未未开启UDP转发时使用的策略，可选DIRECT、REJECT
udp-fallback-mode = REJECT
# 🔺 域名拒绝规则执行的阶段 DNS：使用 LoopbackIP、No Answer 或 NXDomain 的方式阻止 DNS 查询以达到拦截请求的目的;Request：在请求转发阶段拦截请求 ⚠️ 在 HTTP Proxy & TUN 模式下由于拦截到的系统 DNS 较少，大部分的拦截都会在转发请求阶段进行。
domain-reject-mode = DNS
# 🔺 在DNS阶段拒绝域名时采用的方式:LOOPBACKIP：回环IP;NOANSWER：DNS响应为空;NXDOMAIN：错误码为3的DNS响应
dns-reject-mode = LoopbackIP

[Proxy]

[Remote Proxy]
# 🔺 订阅节点:别名 = 订阅URL
V2 = https://onkk.cc/x,udp=default,fast-open=default,vmess-aead=true,skip-cert-verify=default,enabled=true,flexible-sni=true

[Proxy Group]

[Remote Filter]

[Rule]
FINAL,DIRECT

[Remote Rule]

[Host]
# 🔺 DNS映射
*.icloud.com = server:119.29.29.29
*.icloud.com.cn = server:119.29.29.29
*.tencent.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29

[Rewrite]

[Script]

[Remote Script]

[Plugin]
https://kelee.one/Tool/Loon/Plugin/NeteaseCloudMusic_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/Bilibili_remove_ads.plugin, enabled=true
https://kelee.one/Tool/Loon/Plugin/YouTube_remove_ads.plugin, enabled=true

[Mitm]
# 🔺 本地主机名
hostname =
# 🔺 跳过验证证书
skip-server-cert-verify = false
# 🔺 密码与证书
ca-passphrase = 05EC84Y0
ca-p12 = MIIJdQIBAzCCCT8GCSqGSIb3DQEHAaCCCTAEggksMIIJKDCCA98GCSqGSIb3DQEHBqCCA9AwggPMAgEAMIIDxQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIxxeIbPQq5MYCAggAgIIDmAVzLXiBHmIIPSouqpG1l65n6PanaeaAwVgiCyT4HkaHNdmC6XTn0rXw0a5WHfQVGBnKPQ0/hBkfJCoAHV6Cq5WaLiIHUPuDPwmdSWWnoc0OCdx/gsAi/lU+ebCY0yWj0fY3FnhZ8O5jnT76CmSd7dIoI8VuVhek1t87Xbq9n8FqVIStI84npNoCxjLiFwTktIkGRSKFzYz58TyIC/KAzTbFO1aIIXz3Uzu+LPNHRLH4YQxuxfayEhExEhIxRkLTDB4d4SA1iY9cUtzFIkXpvFYbgdmo+ax/4R1aSOYvdeaSf/fOB36QV6olVSnW0Jafmvs3rxwHFvGajI/RObIIM088EChzjwi+oPJmOBv5FnlCx5piqQrfqH5JFqhWhbYbGsisVXfxVgrPPpqg0JKP9mMYeeoJ0YerPn4iLcNvgUBkNZtGlU/peFSCZhQsGKvcPSyFux3CAc/tpQm//XTz5LVoAUTRRFUQuJ9fdXsQy1rg8iYGSc4HcVmbXhXuRSwSNUbw/KrYsdcBJHTC7cfoHef20AonIH+4+2HPzmuYI25la6m1J/4saKDlEYwUTKur2Im0C36RnGDkakGNPclgrQaEJI91oOs7u7SMyMeyfzvAm2w4H8pcVeeF1IcQHH5/EY+Z8fe1qfx6B++b5+lTilsKBsOGkw6uVKyutrY4AMTPY6bnpgTZefGjSu+waAGPWqX/1j+IAuSPnzsArc0aLf4U4FbVwbmV/3Pp7kYH5Hmm/9weM2C5RQuyQDJnG6mV3Xy/egKUw7KwvibHsdK0anwygMLlhrUDZlDKTACPskr1HrhKBz2XOH2GPROcphrXSXFMPdpWqI6eCWWpzlpwCV8p8G9U+g0qF/DpGHgTff/3TivDOiGXWjO6Yisp/gSjy1tnpZq3AfglS/9mF1s2FqRwGbVpiiZzWpnrf0ZTD1HiFWtFXOCRVPVhWg/NN1M2KbQSEjUQh32w3g8HLVxwPANPZMnWZGAOSWOoFtlOzJRfLgO7Rtx8ItSYJo6VUGXh6gkHcW+DkDgm+bICrEyZT8nthG4/vQtruXWN9FZ0QkwbLmGascRybmtgfq0KhZPfCmS1YbaTQ7jJphmMeFHyOUC6yUs9yGlmqpHZdUDLzs+XiK/wz7FLiScmnsPPoVbdb5YEFCFP07nfgZL6pjAyWPjWBmUQqh8x7URipKQFNjB3LjjlTcHpSk0kwPCRWTFgZLZUKEV/7/RAMIIFQQYJKoZIhvcNAQcBoIIFMgSCBS4wggUqMIIFJgYLKoZIhvcNAQwKAQKgggTuMIIE6jAcBgoqhkiG9w0BDAEDMA4ECGe0gjqSvTZrAgIIAASCBMj3tJLUMgN+rmXPnbekvCqNTFwz+qDMvpqvaaezBEbDs9sOh/YkZ2TJuz96dwhgIZr+VRWmWPr+q20AVU4Icis8ZoXSCFjUbBwpPgrRe0gb6Do6/VjYu6p5aR5ZtqQSC6DD3zlclYtpNHHGr8y/pey/0y+rVgVhUVHKy6CXNBWmpGVq2zKdOfd32QCkDrY6paZsfmtU86sMqu9A2nacNATD9PsYmplvvSt/+ADBWJ1zcv7cy27qTJRG4yOjHHz9tFyZeAfLIVPeJMo9XnyiQp3jppYXkfM5eMLH1RBhOc9qvqqb0lYB86B1TDRLJpJnq9Ktcrq91qV3H37qTUd1rOgJZfdyRgmctJ9D4aRAtYF4OJQZs2jkFNTMjjO//Cr7lQvGzH0wNaEOD5SnAhSNn/+ZJlQdWLvZJwa3OKNdjWYqNVbFPyD9JdYTgOvImVPdwzYejQN9S7AwRBp1jH1pw8Bc44Ra+9s1L0gSjuSOp05ir9oevR8mHcvSptoWuvjOS5S/QEywZc4ksIuNc1xAfXmw9EgxuMHbMGj4QYnw58hGmqgPK38fDKpcjU+J0UhYyT7L0H2UC1W/RlQ2zHaSbbKxVsdrrLR/kM0HQ2dFne7R4du+LPjDWvTpCXM4hUW9EQR9VIbA6Tq3S4I4truHhvTUutCXjeePtADoHHqdeKtZ4+f43+CYIV17L1eN10oN1iLY94ZtzGKFNvNbcHxGlZyz/pFlEspXbu9oX8nmLsYBZmMqETmcBWYuIyWAsFgOjwPTbRvuQ4AZdQVCRRgZQXaDoMm01HYyqMWxuArFpdlLorvKLWSy9DD3lqZqwpfVPfEPAL974mGcz1ITPJjeqaRi6ozsAH2hxN7dJpKSg06Xk9DpBYt34GQ+iAeG2KMrGMgXggTShGxvQcoiCVS73++me/l6p3leJWRnaJVU/kpvjtKzGKFzd1MIZ11qQ6AgabA8WwAp+wEAhsuVE1gzMqLGYWe3e5kD+7S/bk26Vwwt7vQik6t+VdCpdcA46ToNwJNv5l63JIL+NI/hEtr4yezCteI+BXO9GoTCnXz6i5x8S8LrDH1IRMfFA6KvVXIyLjb5apJxDkrXedQX6tKX1ONcyxxi8U7AdHsAkSvTaZcxM2+2qCt141VHLHu7c7Pj/Ec8IubjQcAGVWy2XQ855wQZCPHCYrYXqa/5qLkYJblCIDwr/OBdiH3v1wF2J7QJUdWgM0cJmPFH8+yuB6bmQigIckTgmwG4kVRERGLqIdqtAMuOHqjcfNFa6EioFTOUeUP4ir9o+8a1SyckfYyCy9bMJK8cj8OrrB4yhZqpq3AsovV09YiLL4BP9xIuCZBBlzHFMlFN+UK6muleBiU8usI0+HqT49Hoybgi0P+U7xMaLHB0o+UyeXu3OcDBplpfaTBWfZtQMKLmfO1fWKi/egrAnqQl+u2sBCJYkFy1JlD2Slsx/ipmBtLgi3Nuz5q7kxeP4EAd7KP4uJEq7x2c97M1hhflF+9ZsknZ4AknAEYLxIHCzzeyWWA5m+9e3hDvOzcUWJ12A19YRxDySPpxYDMxt/9NePnoOfX2FnU3CuNx0B/o8CE8GX4NPSynpeiXYEZN8o84wxO43Jp9zBNSlMzF9KbxsZ2mRCYxJTAjBgkqhkiG9w0BCRUxFgQU0q5r1bkP6ODQeelr6s8cmvWyVVcwLTAhMAkGBSsOAwIaBQAEFMZj/OnA2+jq+dCsDyOrQJ/O7VKZBAh6qNoejtwjPg==